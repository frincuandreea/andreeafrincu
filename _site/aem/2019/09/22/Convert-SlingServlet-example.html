<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <!-- Main JS (navbar.js, katex_init.js and masonry_init.js)-->
    <script defer src="/assets/js/main.min.js"></script>
    
    <!-- CSS -->
    <link rel="stylesheet" href="/assets/css/main.css">

    <!--Favicon-->
    <link rel="shortcut icon" href="/assets/favicon.ico" type="image/x-icon">

    <!-- RSS -->
    <link rel="alternate" type="application/atom+xml" title="Andreea Frincu" href="https://andreea88.github.io/feed.xml"/>
    
    

    <!-- KaTeX 0.12.0 -->
    <!-- if you have any issue check https://github.com/KaTeX/KaTeX -->
    
    <script defer src="/assets/js/vendor/katex.min.js"></script>
    <script defer src="/assets/js/vendor/auto-render.min.js" onload="renderMathInElement(document.body);"></script>
    

    <!-- Google Analytics / Cookie Consent -->
    <script>
      const cookieName = 'cookie-notice-dismissed-https://andreea88.github.io';
      const isCookieConsent = 'false';
      const analyticsName = '';
    </script>

    
    

    <!-- seo tags -->
    <meta property="og:image" content="https://andreea88.github.io/assets/img/pexels/nature.jpg">
    
    <meta property="og:type" content="website" />
    
    <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Convert @SlingServlet to @Component | Andreea Frincu</title>
<meta name="generator" content="Jekyll v4.2.1" />
<meta property="og:title" content="Convert @SlingServlet to @Component" />
<meta property="og:locale" content="en" />
<meta name="description" content="Last problem that I had to work was actually to convert all the apache felix annotation to the new R6 OSGI annotation. Anybody who is working in an AEM project knows that once you update your project to run with the AEM 6.4 server you have to update the annotation of all your services, servlets, components to the R6 OSGI." />
<meta property="og:description" content="Last problem that I had to work was actually to convert all the apache felix annotation to the new R6 OSGI annotation. Anybody who is working in an AEM project knows that once you update your project to run with the AEM 6.4 server you have to update the annotation of all your services, servlets, components to the R6 OSGI." />
<link rel="canonical" href="https://andreea88.github.io/aem/2019/09/22/Convert-SlingServlet-example.html" />
<meta property="og:url" content="https://andreea88.github.io/aem/2019/09/22/Convert-SlingServlet-example.html" />
<meta property="og:site_name" content="Andreea Frincu" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-09-22T00:00:00+02:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Convert @SlingServlet to @Component" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2019-09-22T00:00:00+02:00","datePublished":"2019-09-22T00:00:00+02:00","description":"Last problem that I had to work was actually to convert all the apache felix annotation to the new R6 OSGI annotation. Anybody who is working in an AEM project knows that once you update your project to run with the AEM 6.4 server you have to update the annotation of all your services, servlets, components to the R6 OSGI.","headline":"Convert @SlingServlet to @Component","mainEntityOfPage":{"@type":"WebPage","@id":"https://andreea88.github.io/aem/2019/09/22/Convert-SlingServlet-example.html"},"url":"https://andreea88.github.io/aem/2019/09/22/Convert-SlingServlet-example.html"}</script>
<!-- End Jekyll SEO tag -->


    <!-- RSS -->
    <link type="application/atom+xml" rel="alternate" href="https://andreea88.github.io/feed.xml" title="Andreea Frincu" />

    <!-- Twitter Cards -->
    <meta name="twitter:title" content="Convert @SlingServlet to @Component">
    <meta name="twitter:description" content="Last problem that I had to work was actually to convert all the apache felix annotation to the new R6 OSGI annotation. Anybody who is working in an AEM proje...">
    
    <meta name="twitter:card" content="summary">
    <meta name="twitter:image" content="https://andreea88.github.io/assets/img/pexels/nature.jpg">
    <meta name="twitter:image:alt" content="Convert @SlingServlet to @Component">
</head>

  <body>
    <header class="site-header">

    <!-- Logo and title -->
	<div class="branding">
        
        
		<a href="/">
			<img alt="logo img" class="avatar" src="/assets/img/mylogo.png" />
		</a>
        
        <a class="site-title" aria-label="Andreea Frincu" href="/">
        Andreea Frincu
		</a>
	</div>

    <!-- Toggle menu -->
    <nav class="clear">
    <a aria-label="pull" id="pull" class="toggle" href="#">
    <i class="fa fa-bars fa-lg"></i>
    </a>
        <ul class="hide">
        
        
        <li><a href="/aem/2019/09/22/Convert-SlingServlet-example.html"
               class="active" >en</a></li>

        
        
        
            <li> |<a href="/ro/aem/2019/09/22/Convert-SlingServlet-example.html"
                      >ro</a></li>
        
        
        </ul>
    <!-- Menu -->
    <ul class="hide">
        
        <li>
            
            
            <a class="clear" aria-label="home" title="home}" href="/">Home</a>
            
        </li>
        <li class="separator"> | </li>
        
            
            
        
            
            <li class="separator"> | </li>
            <li>
                
                <a class="clear" aria-label="about_me" title="about_me" href="/about/">
                     About me
                    
                </a>
            </li>
            
            
        
            
            
        
            
            
        
            
            
        
            
            <li class="separator"> | </li>
            <li>
                
                <a class="clear" aria-label="search" title="search" href="/search/">
                     <i class="fa fa-search" aria-hidden="true"></i>
                    
                </a>
            </li>
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
    </ul>


	</nav>
</header>

    <div class="content">
      <article >
  <header id="main" style="">
    <div class="title-padder">
      
      <h1 id="Convert+%40SlingServlet+to+%40Component" class="title">Convert @SlingServlet to @Component</h1>
      


<div class="post-info">
    <p class="meta">
      September 22, 2019
    </p></div>

      
    </div>
     <span class="read-time" title="Estimated read time">
  <svg id="i-clock" viewBox="0 0 32 32" width="20" height="20" fill="none" stroke="currentcolor" stroke-linecap="round"
       stroke-linejoin="round" stroke-width="2"><circle cx="16" cy="16" r="14" /><path d="M16 8 L16 16 20 20" /></svg>

  
  
    2 mins read.
  
</span>
    <style>
      svg#i-clock {vertical-align: middle;}
    </style>
  </header>




  <section class="post-content">
  
      <p>Last problem that I had to work was actually to convert all the apache felix annotation to the new R6 OSGI annotation. Anybody who is working in an AEM project knows that once you update your project to run with the AEM 6.4 server you have to update the annotation of all your services, servlets, components to the R6 OSGI.</p>

<p>In this post I will explain how this can be done for the servlets with examples.</p>

<h2 id="code-highlighting-examples">Code highlighting examples</h2>

<p>A simple servlet which is using the @SlingServlet looks like this:</p>

<h3 id="java">Java</h3>

<p>java example</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@SlingServlet</span><span class="o">(</span>
    <span class="n">paths</span> <span class="o">=</span> <span class="o">{</span><span class="s">"/pathtest/content"</span><span class="o">},</span>
    <span class="n">methods</span> <span class="o">=</span> <span class="o">{</span><span class="s">"GET"</span><span class="o">,</span> <span class="s">"PUT"</span><span class="o">},</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s">"com.servlet.TestServlet"</span>
<span class="o">)</span>
<span class="nd">@Properties</span><span class="o">({</span>
       <span class="nd">@Property</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="nc">Constants</span><span class="o">.</span><span class="na">SERVICE_VENDOR</span><span class="o">,</span> <span class="n">value</span> <span class="o">=</span> <span class="s">"Test Vendor"</span><span class="o">),</span>
       <span class="nd">@Property</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="nc">Constants</span><span class="o">.</span><span class="na">SERVICE_DESCRIPTION</span><span class="o">,</span> <span class="n">value</span> <span class="o">=</span> <span class="s">"Test description"</span><span class="o">),</span>
<span class="o">})</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestServlet</span> <span class="kd">extends</span> <span class="nc">SlingAllMethodsServlet</span> <span class="o">{</span>

    <span class="nd">@Override</span>
        <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">doGet</span><span class="o">(</span><span class="nc">SlingHttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="nd">@NotNull</span> <span class="nc">SlingHttpServletResponse</span> <span class="n">response</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IOException</span> <span class="o">{</span>
          <span class="n">responseHTML</span> <span class="o">=</span> <span class="s">"&lt;div&gt;This is a test Servlet&lt;/div&gt;"</span>
          <span class="n">response</span><span class="o">.</span><span class="na">setContentType</span><span class="o">(</span><span class="s">"text/html"</span><span class="o">);</span>
          <span class="n">response</span><span class="o">.</span><span class="na">setCharacterEncoding</span><span class="o">(</span><span class="s">"UTF-8"</span><span class="o">);</span>
          <span class="n">response</span><span class="o">.</span><span class="na">setStatus</span><span class="o">(</span><span class="mi">200</span><span class="o">);</span>
          <span class="n">response</span><span class="o">.</span><span class="na">getWriter</span><span class="o">().</span><span class="na">write</span><span class="o">(</span><span class="n">responseHTML</span><span class="o">);</span>
        <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<p>If we are converting the servlet above the we get the following result:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="nd">@Component</span><span class="o">(</span>
    <span class="n">immediate</span> <span class="o">=</span> <span class="kc">true</span><span class="o">,</span>
    <span class="n">service</span> <span class="o">={</span><span class="nc">Servlet</span><span class="o">.</span><span class="na">class</span><span class="o">},</span>
    <span class="n">property</span> <span class="o">=</span> <span class="o">{</span>
        <span class="s">"sling.servlet.paths=/pathtest/content"</span><span class="o">,</span>
        <span class="s">"sling.servlet.methods=get"</span><span class="o">,</span>
        <span class="s">"sling.servlet.methods=put"</span><span class="o">,</span>
        <span class="s">"sling.core.servletName=com.servlet.TestServlet"</span><span class="o">,</span>
        <span class="nc">Constants</span><span class="o">.</span><span class="na">SERVICE_VENDOR</span><span class="o">+</span><span class="s">"=Test Vendor"</span><span class="o">,</span>
        <span class="nc">Constants</span><span class="o">.</span><span class="na">SERVICE_DESCRIPTION</span><span class="o">+</span><span class="s">"=Test description"</span>
    <span class="o">}</span>
<span class="o">)</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestServlet</span> <span class="kd">extends</span> <span class="nc">SlingAllMethodsServlet</span> <span class="o">{</span>

 <span class="nd">@Override</span>
        <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">doGet</span><span class="o">(</span><span class="nc">SlingHttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="nd">@NotNull</span> <span class="nc">SlingHttpServletResponse</span> <span class="n">response</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IOException</span> <span class="o">{</span>
          <span class="n">responseHTML</span> <span class="o">=</span> <span class="s">"&lt;div&gt;This is a test Servlet&lt;/div&gt;"</span>
          <span class="n">response</span><span class="o">.</span><span class="na">setContentType</span><span class="o">(</span><span class="s">"text/html"</span><span class="o">);</span>
          <span class="n">response</span><span class="o">.</span><span class="na">setCharacterEncoding</span><span class="o">(</span><span class="s">"UTF-8"</span><span class="o">);</span>
          <span class="n">response</span><span class="o">.</span><span class="na">setStatus</span><span class="o">(</span><span class="mi">200</span><span class="o">);</span>
          <span class="n">response</span><span class="o">.</span><span class="na">getWriter</span><span class="o">().</span><span class="na">write</span><span class="o">(</span><span class="n">responseHTML</span><span class="o">);</span>
        <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<p>Comparing the two portions of code we see immediate that before we were using the @SlingServlet annotation but now we use the @Component annotation and we referrer to servlet using the attribute “service ={Servlet.class}”. A second part that change is the property paths and methods are now replace as following:</p>

<ul>
  <li>paths = {“/pathtest/content”} is replaced by “sling.servlet.paths=/pathtest/content”</li>
  <li>methods = {“GET”, “PUT”} are replaced by the properties “sling.servlet.methods=get” and “sling.servlet.methods=put”</li>
  <li>name = “com.servlet.TestServlet” is replaced by the “sling.core.servletName=com.servlet.TestServlet”</li>
</ul>

<p>Pretty much this is it. It is not too complicated. What is really helpful is the Sling Apache documentation about servlets you can find it <a href="https://sling.apache.org/documentation/the-sling-engine/servlets.html"> here </a>.</p>

    
  </section>

  <!-- Social media shares -->
  

<div class="share-buttons">
    <ul class="share-buttons">
        <div class="meta">Share</div>
              
        <li>
            <a href="http://www.linkedin.com/shareArticle?mini=true&url=https://andreea88.github.io/aem/2019/09/22/Convert-SlingServlet-example.html&title=Convert+%40SlingServlet+to+%40Component%20%7C%20Andreea+Frincu&summary=&source=https://andreea88.github.io/aem/2019/09/22/Convert-SlingServlet-example.html" target="_blank" title=" LinkedIn">
			<i class="fa fa-linkedin fa-2x" aria-hidden="true"></i>
			<span class="sr-only">Share on LinkedIn</span>
		</a>
        </li>
          
        <li>
            <a href="mailto:?subject=Convert+%40SlingServlet+to+%40Component%20%7C%20Andreea+Frincu&body=:%20https://andreea88.github.io/aem/2019/09/22/Convert-SlingServlet-example.html" target="_blank" title="">
			<i class="fa fa-envelope-square fa-2x" aria-hidden="true"></i>
			<span class="sr-only">Email</span>
		</a>
        </li>
        
    </ul>
</div>




   <!-- Tag list -->
  
  


<footer>
  <div class="tag-list">
    
      <div class="meta">Tags</div>
    

    
    <a class="button" href="/tags#AEM6.4">
      <p><i class="fa fa-tag fa-fw"></i> AEM6.4</p>
    </a>
    
    <a class="button" href="/tags#Component">
      <p><i class="fa fa-tag fa-fw"></i> Component</p>
    </a>
    
    <a class="button" href="/tags#Migration">
      <p><i class="fa fa-tag fa-fw"></i> Migration</p>
    </a>
    
    <a class="button" href="/tags#OSGI">
      <p><i class="fa fa-tag fa-fw"></i> OSGI</p>
    </a>
    
    <a class="button" href="/tags#SlingServlet">
      <p><i class="fa fa-tag fa-fw"></i> SlingServlet</p>
    </a>
    
  </div>
</footer>



</article>

<!-- Disqus -->


<!-- Post navigation -->

  <div id="post-nav">
    
    <div id="previous-post">
        <a alt="Using HTL in AEM application" href="/aem/2020/11/04/Sightly-HTL-aem-usage.html">
            <p>Previous post</p>
            Using HTL in AEM application
        </a>
    </div>
    

    
</div>



<!-- To change color of links in the page -->
<style>
  

  header#main {
    background-repeat:no-repeat;
  
  }
</style>

    </div>
    <footer class="site-footer">
    <p class="text">
        andreeafrincu
           </p>
            <div class="footer-icons">
                <ul>
                <!-- Social icons from Font Awesome, if enabled -->
                


<li>
    <a href="mailto:frincuandreeaoana@gmail.com" title="Email">
		<span class="fa-stack fa-lg">
            <i class="fa fa-circle fa-stack-2x"></i>
            <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
        </span>
    </a>
</li>













<li>
    <a href="https://github.com/frincuandreea" title="Follow on GitHub">
		<span class="fa-stack fa-lg">
            <i class="fa fa-circle fa-stack-2x"></i>
            <i class="fa fa-github fa-stack-1x fa-inverse"></i>
        </span>
    </a>
</li>







<li>
    <a href="https://www.linkedin.com/in/frincu-andreea-71071930" title="Follow on LinkedIn">
		<span class="fa-stack fa-lg">
            <i class="fa fa-circle fa-stack-2x"></i>
            <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
        </span>
    </a>
</li>


























                </ul>
            </div>
</footer>



  </body>
</html>
